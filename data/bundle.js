var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function o(){return Object.create(null)}function r(e){e.forEach(n)}function s(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(t,n,o){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}const i="undefined"!=typeof window;let a=i?()=>window.performance.now():()=>Date.now(),u=i?e=>requestAnimationFrame(e):e;const d=new Set;function f(e){d.forEach((t=>{t.c(e)||(d.delete(t),t.f())})),0!==d.size&&u(f)}let m=!1;function h(e,t,n,o){for(;e<t;){const r=e+(t-e>>1);n(r)<=o?e=r+1:t=r}return e}function p(e,t){m?(!function(e){if(e.hydrate_init)return;e.hydrate_init=!0;const t=e.childNodes,n=new Int32Array(t.length+1),o=new Int32Array(t.length);n[0]=-1;let r=0;for(let e=0;e<t.length;e++){const s=h(1,r+1,(e=>t[n[e]].claim_order),t[e].claim_order)-1;o[e]=n[s]+1;const c=s+1;n[c]=e,r=Math.max(c,r)}const s=[],c=[];let l=t.length-1;for(let e=n[r]+1;0!=e;e=o[e-1]){for(s.push(t[e-1]);l>=e;l--)c.push(t[l]);l--}for(;l>=0;l--)c.push(t[l]);s.reverse(),c.sort(((e,t)=>e.claim_order-t.claim_order));for(let t=0,n=0;t<c.length;t++){for(;n<s.length&&c[t].claim_order>=s[n].claim_order;)n++;const o=n<s.length?s[n]:null;e.insertBefore(c[t],o)}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild),t!==e.actual_end_child?e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling):t.parentNode!==e&&e.appendChild(t)}function v(e,t,n){m&&!n?p(e,t):t.parentNode===e&&t.nextSibling==n||e.insertBefore(t,n||null)}function g(e){e.parentNode.removeChild(e)}function b(e){return document.createElement(e)}function $(e){return document.createTextNode(e)}function x(){return $(" ")}function y(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function C(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}const T=new Set;let R,k=0;function j(e,t,n,o,r,s,c,l=0){const i=16.666/o;let a="{\n";for(let e=0;e<=1;e+=i){const o=t+(n-t)*s(e);a+=100*e+`%{${c(o,1-o)}}\n`}const u=a+`100% {${c(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${l}`,f=e.ownerDocument;T.add(f);const m=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(b("style")).sheet),h=f.__svelte_rules||(f.__svelte_rules={});h[d]||(h[d]=!0,m.insertRule(`@keyframes ${d} ${u}`,m.cssRules.length));const p=e.style.animation||"";return e.style.animation=`${p?`${p}, `:""}${d} ${o}ms linear ${r}ms 1 both`,k+=1,d}function D(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),r=n.length-o.length;r&&(e.style.animation=o.join(", "),k-=r,k||u((()=>{k||(T.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),T.clear())})))}function O(e){R=e}function P(e){(function(){if(!R)throw new Error("Function called outside component initialization");return R})().$$.on_mount.push(e)}const F=[],B=[],M=[],L=[],E=Promise.resolve();let I=!1;function H(e){M.push(e)}function A(e){L.push(e)}let S=!1;const z=new Set;function N(){if(!S){S=!0;do{for(let e=0;e<F.length;e+=1){const t=F[e];O(t),q(t.$$)}for(O(null),F.length=0;B.length;)B.pop()();for(let e=0;e<M.length;e+=1){const t=M[e];z.has(t)||(z.add(t),t())}M.length=0}while(F.length);for(;L.length;)L.pop()();I=!1,S=!1,z.clear()}}function q(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(H)}}let U;function K(e,t,n){e.dispatchEvent(function(e,t,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,!1,t),o}(`${t?"intro":"outro"}${n}`))}const V=new Set;let W;function G(){W={r:0,c:[],p:W}}function J(){W.r||r(W.c),W=W.p}function Q(e,t){e&&e.i&&(V.delete(e),e.i(t))}function X(e,t,n,o){if(e&&e.o){if(V.has(e))return;V.add(e),W.c.push((()=>{V.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}const Y={duration:0};function Z(n,o,c,l){let i=o(n,c),m=l?0:1,h=null,p=null,v=null;function g(){v&&D(n,v)}function b(e,t){const n=e.b-m;return t*=Math.abs(n),{a:m,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function $(o){const{delay:s=0,duration:c=300,easing:l=t,tick:$=e,css:x}=i||Y,y={start:a()+s,b:o};o||(y.group=W,W.r+=1),h||p?p=y:(x&&(g(),v=j(n,m,o,c,s,l,x)),o&&$(0,1),h=b(y,c),H((()=>K(n,o,"start"))),function(e){let t;0===d.size&&u(f),new Promise((n=>{d.add(t={c:e,f:n})}))}((e=>{if(p&&e>p.start&&(h=b(p,c),p=null,K(n,h.b,"start"),x&&(g(),v=j(n,m,h.b,h.duration,0,l,i.css))),h)if(e>=h.end)$(m=h.b,1-m),K(n,h.b,"end"),p||(h.b?g():--h.group.r||r(h.group.c)),h=null;else if(e>=h.start){const t=e-h.start;m=h.a+h.d*l(t/h.duration),$(m,1-m)}return!(!h&&!p)})))}return{run(e){s(i)?(U||(U=Promise.resolve(),U.then((()=>{U=null}))),U).then((()=>{i=i(),$(e)})):$(e)},end(){g(),h=p=null}}}function ee(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function te(e){e&&e.c()}function ne(e,t,o,c){const{fragment:l,on_mount:i,on_destroy:a,after_update:u}=e.$$;l&&l.m(t,o),c||H((()=>{const t=i.map(n).filter(s);a?a.push(...t):r(t),e.$$.on_mount=[]})),u.forEach(H)}function oe(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function re(e,t){-1===e.$$.dirty[0]&&(F.push(e),I||(I=!0,E.then(N)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(t,n,s,c,l,i,a=[-1]){const u=R;O(t);const d=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:l,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:n.context||[]),callbacks:o(),dirty:a,skip_bound:!1};let f=!1;if(d.ctx=s?s(t,n.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return d.ctx&&l(d.ctx[e],d.ctx[e]=r)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](r),f&&re(t,e)),n})):[],d.update(),f=!0,r(d.before_update),d.fragment=!!c&&c(d.ctx),n.target){if(n.hydrate){m=!0;const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach(g)}else d.fragment&&d.fragment.c();n.intro&&Q(t.$$.fragment),ne(t,n.target,n.anchor,n.customElement),m=!1,N()}O(u)}class ce{$destroy(){oe(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function le(t){let n,o,r,s,c,l;return{c(){n=b("h1"),n.textContent="Frames",o=x(),r=b("div"),s=b("button"),s.textContent="Refresh",w(n,"class","svelte-1u93ogr"),w(r,"class","center svelte-1u93ogr")},m(e,i){v(e,n,i),v(e,o,i),v(e,r,i),p(r,s),c||(l=y(s,"click",t[0]),c=!0)},p:e,i:e,o:e,d(e){e&&g(n),e&&g(o),e&&g(r),c=!1,l()}}}function ie(e){return[()=>{window.location.href="/"}]}class ae extends ce{constructor(e){super(),se(this,e,ie,le,c,{})}}function ue(t){let n;return{c(){n=b("div"),n.innerHTML='<div class="big svelte-ihoour"><div class="small svelte-ihoour"></div></div>',w(n,"class","center svelte-ihoour")},m(e,t){v(e,n,t)},p:e,i:e,o:e,d(e){e&&g(n)}}}class de extends ce{constructor(e){super(),se(this,e,null,ue,c,{})}}function fe(e,{delay:n=0,duration:o=400,easing:r=t}={}){const s=+getComputedStyle(e).opacity;return{delay:n,duration:o,easing:r,css:e=>"opacity: "+e*s}}function me(e){let t,n,o,r,s,c,l,i,a,u,d,f,m,h,T,R;return c=new de({}),{c(){t=b("div"),n=x(),o=b("div"),r=b("h2"),r.textContent="New Frame Detected!",s=x(),te(c.$$.fragment),l=x(),i=b("h2"),a=$("#"),u=$(e[0]),d=x(),f=b("button"),f.textContent="Close",w(t,"class","blackout svelte-1ebz6b2"),w(r,"class","svelte-1ebz6b2"),C(i,"color","#BABABA"),w(i,"class","svelte-1ebz6b2"),w(f,"class","svelte-1ebz6b2"),w(o,"class","bg svelte-1ebz6b2")},m(m,g){v(m,t,g),v(m,n,g),v(m,o,g),p(o,r),p(o,s),ne(c,o,null),p(o,l),p(o,i),p(i,a),p(i,u),p(o,d),p(o,f),h=!0,T||(R=y(f,"click",e[1]),T=!0)},p(e,[t]){(!h||1&t)&&_(u,e[0])},i(e){h||(Q(c.$$.fragment,e),H((()=>{m||(m=Z(o,fe,{duration:200},!0)),m.run(1)})),h=!0)},o(e){X(c.$$.fragment,e),m||(m=Z(o,fe,{duration:200},!1)),m.run(0),h=!1},d(e){e&&g(t),e&&g(n),e&&g(o),oe(c),e&&m&&m.end(),T=!1,R()}}}function he(e,t,n){let{frameID:o}=t,{showFrameDetected:r}=t;return e.$$set=e=>{"frameID"in e&&n(0,o=e.frameID),"showFrameDetected"in e&&n(2,r=e.showFrameDetected)},[o,()=>{n(2,r=!1)},r]}class pe extends ce{constructor(e){super(),se(this,e,he,me,c,{frameID:0,showFrameDetected:2})}}const ve=[];const ge=function(t,n=e){let o;const r=[];function s(e){if(c(t,e)&&(t=e,o)){const e=!ve.length;for(let e=0;e<r.length;e+=1){const n=r[e];n[1](),ve.push(n,t)}if(e){for(let e=0;e<ve.length;e+=2)ve[e][0](ve[e+1]);ve.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(c,l=e){const i=[c,l];return r.push(i),1===r.length&&(o=n(s)||e),c(t),()=>{const e=r.indexOf(i);-1!==e&&r.splice(e,1),0===r.length&&(o(),o=null)}}}}("001");function be(t){let n,o,r,s,c,l,i,a;return{c(){n=b("div"),o=b("div"),o.innerHTML='<div class="small svelte-8axr32"></div>',r=x(),s=b("h3"),c=$("#"),l=$(t[0]),w(o,"class","big svelte-8axr32"),w(s,"class","svelte-8axr32"),w(n,"class","frameObject svelte-8axr32")},m(e,u){v(e,n,u),p(n,o),p(n,r),p(n,s),p(s,c),p(s,l),i||(a=y(n,"click",t[1]),i=!0)},p(e,[t]){1&t&&_(l,e[0])},i:e,o:e,d(e){e&&g(n),i=!1,a()}}}function $e(e,t,n){let{frameID:o}=t,{showRecordPage:r}=t;return e.$$set=e=>{"frameID"in e&&n(0,o=e.frameID),"showRecordPage"in e&&n(2,r=e.showRecordPage)},[o,()=>{ge.set(o),n(2,r=!0),console.log(o)},r]}class xe extends ce{constructor(e){super(),se(this,e,$e,be,c,{frameID:0,showRecordPage:2})}}function ye(e,t,n){const o=e.slice();return o[3]=t[n],o}function we(e){let t,n,o;function r(t){e[2](t)}let s={frameID:e[3]};return void 0!==e[0]&&(s.showRecordPage=e[0]),t=new xe({props:s}),B.push((()=>ee(t,"showRecordPage",r))),{c(){te(t.$$.fragment)},m(e,n){ne(t,e,n),o=!0},p(e,o){const r={};2&o&&(r.frameID=e[3]),!n&&1&o&&(n=!0,r.showRecordPage=e[0],A((()=>n=!1))),t.$set(r)},i(e){o||(Q(t.$$.fragment,e),o=!0)},o(e){X(t.$$.fragment,e),o=!1},d(e){oe(t,e)}}}function _e(e){let t,n,o=e[1],r=[];for(let t=0;t<o.length;t+=1)r[t]=we(ye(e,o,t));const s=e=>X(r[e],1,1,(()=>{r[e]=null}));return{c(){t=b("div");for(let e=0;e<r.length;e+=1)r[e].c();w(t,"class","frameCollection svelte-p5k6wu")},m(e,o){v(e,t,o);for(let e=0;e<r.length;e+=1)r[e].m(t,null);n=!0},p(e,[n]){if(3&n){let c;for(o=e[1],c=0;c<o.length;c+=1){const s=ye(e,o,c);r[c]?(r[c].p(s,n),Q(r[c],1)):(r[c]=we(s),r[c].c(),Q(r[c],1),r[c].m(t,null))}for(G(),c=o.length;c<r.length;c+=1)s(c);J()}},i(e){if(!n){for(let e=0;e<o.length;e+=1)Q(r[e]);n=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)X(r[e]);n=!1},d(e){e&&g(t),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(r,e)}}}function Ce(e,t,n){let{savedFrameIDs:o}=t,{showRecordPage:r}=t;return e.$$set=e=>{"savedFrameIDs"in e&&n(1,o=e.savedFrameIDs),"showRecordPage"in e&&n(0,r=e.showRecordPage)},[r,o,function(e){r=e,n(0,r)}]}class Te extends ce{constructor(e){super(),se(this,e,Ce,_e,c,{savedFrameIDs:1,showRecordPage:0})}}function Re(t){let n,o,r,s,c;return{c(){n=b("div"),n.innerHTML='<h3 class="svelte-17zyqyg">Front</h3>',o=x(),r=b("div"),r.innerHTML='<h3 style="color:#C7C7C7;" class="svelte-17zyqyg">Back</h3>',w(n,"class","btnObj svelte-17zyqyg"),C(n,"border-radius","12px 0px 0px 12px"),w(r,"class","btnObj svelte-17zyqyg"),C(r,"border-radius","0px 12px 12px 0px"),C(r,"background","#3C3C3C")},m(e,l){v(e,n,l),v(e,o,l),v(e,r,l),s||(c=y(n,"click",t[3]),s=!0)},p:e,d(e){e&&g(n),e&&g(o),e&&g(r),s=!1,c()}}}function ke(t){let n,o,r,s,c;return{c(){n=b("div"),n.innerHTML='<h3 style="color:#C7C7C7;" class="svelte-17zyqyg">Front</h3>',o=x(),r=b("div"),r.innerHTML='<h3 class="svelte-17zyqyg">Back</h3>',w(n,"class","btnObj svelte-17zyqyg"),C(n,"border-radius","12px 0px 0px 12px"),C(n,"background","#3C3C3C"),w(r,"class","btnObj svelte-17zyqyg"),C(r,"border-radius","0px 12px 12px 0px")},m(e,l){v(e,n,l),v(e,o,l),v(e,r,l),s||(c=y(r,"click",t[2]),s=!0)},p:e,d(e){e&&g(n),e&&g(o),e&&g(r),s=!1,c()}}}function je(t){let n;function o(e,t){return"FRONT"==e[0]?ke:Re}let r=o(t),s=r(t);return{c(){n=b("div"),s.c(),w(n,"class","btnCollection svelte-17zyqyg")},m(e,t){v(e,n,t),s.m(n,null)},p(e,[t]){r===(r=o(e))&&s?s.p(e,t):(s.d(1),s=r(e),s&&(s.c(),s.m(n,null)))},i:e,o:e,d(e){e&&g(n),s.d()}}}function De(e,t,n){let{currentCameraType:o}=t;const r=e=>{n(0,o=e)};return e.$$set=e=>{"currentCameraType"in e&&n(0,o=e.currentCameraType)},[o,r,()=>r("BACK"),()=>r("FRONT")]}class Oe extends ce{constructor(e){super(),se(this,e,De,je,c,{currentCameraType:0})}}function Pe(t){let n,o,s,c,l,i,a;return{c(){n=b("div"),n.innerHTML='<h3 class="svelte-1osvx2o">5 s</h3>',o=x(),s=b("div"),s.innerHTML='<h3 class="svelte-1osvx2o">10 s</h3>',c=x(),l=b("div"),l.innerHTML='<h3 style="color:#C7C7C7;" class="svelte-1osvx2o">15 s</h3>',w(n,"class","btnObj svelte-1osvx2o"),C(n,"border-radius","12px 0px 0px 12px"),w(s,"class","btnObj svelte-1osvx2o"),w(l,"class","btnObj svelte-1osvx2o"),C(l,"border-radius","0px 12px 12px 0px"),C(l,"background","#3C3C3C")},m(e,r){v(e,n,r),v(e,o,r),v(e,s,r),v(e,c,r),v(e,l,r),i||(a=[y(n,"click",t[6]),y(s,"click",t[7])],i=!0)},p:e,d(e){e&&g(n),e&&g(o),e&&g(s),e&&g(c),e&&g(l),i=!1,r(a)}}}function Fe(t){let n,o,s,c,l,i,a;return{c(){n=b("div"),n.innerHTML='<h3 class="svelte-1osvx2o">5 s</h3>',o=x(),s=b("div"),s.innerHTML='<h3 style="color:#C7C7C7;" class="svelte-1osvx2o">10 s</h3>',c=x(),l=b("div"),l.innerHTML='<h3 class="svelte-1osvx2o">15 s</h3>',w(n,"class","btnObj svelte-1osvx2o"),C(n,"border-radius","12px 0px 0px 12px"),w(s,"class","btnObj svelte-1osvx2o"),C(s,"background","#3C3C3C"),w(l,"class","btnObj svelte-1osvx2o"),C(l,"border-radius","0px 12px 12px 0px")},m(e,r){v(e,n,r),v(e,o,r),v(e,s,r),v(e,c,r),v(e,l,r),i||(a=[y(n,"click",t[4]),y(l,"click",t[5])],i=!0)},p:e,d(e){e&&g(n),e&&g(o),e&&g(s),e&&g(c),e&&g(l),i=!1,r(a)}}}function Be(t){let n,o,s,c,l,i,a;return{c(){n=b("div"),n.innerHTML='<h3 style="color:#C7C7C7;" class="svelte-1osvx2o">5 s</h3>',o=x(),s=b("div"),s.innerHTML='<h3 class="svelte-1osvx2o">10 s</h3>',c=x(),l=b("div"),l.innerHTML='<h3 class="svelte-1osvx2o">15 s</h3>',w(n,"class","btnObj sBtnObj svelte-1osvx2o"),C(n,"border-radius","12px 0px 0px 12px"),C(n,"background","#3C3C3C"),w(s,"class","btnObj sBtnObj svelte-1osvx2o"),w(l,"class","btnObj sBtnObj svelte-1osvx2o"),C(l,"border-radius","0px 12px 12px 0px")},m(e,r){v(e,n,r),v(e,o,r),v(e,s,r),v(e,c,r),v(e,l,r),i||(a=[y(s,"click",t[2]),y(l,"click",t[3])],i=!0)},p:e,d(e){e&&g(n),e&&g(o),e&&g(s),e&&g(c),e&&g(l),i=!1,r(a)}}}function Me(t){let n;function o(e,t){return 5==e[0]?Be:10==e[0]?Fe:Pe}let r=o(t),s=r(t);return{c(){n=b("div"),s.c(),w(n,"class","btnCollection svelte-1osvx2o")},m(e,t){v(e,n,t),s.m(n,null)},p(e,[t]){r===(r=o(e))&&s?s.p(e,t):(s.d(1),s=r(e),s&&(s.c(),s.m(n,null)))},i:e,o:e,d(e){e&&g(n),s.d()}}}function Le(e,t,n){let{currentTime:o}=t;const r=e=>{n(0,o=e)};return e.$$set=e=>{"currentTime"in e&&n(0,o=e.currentTime)},[o,r,()=>r(10),()=>r(15),()=>r(5),()=>r(15),()=>r(5),()=>r(10)]}class Ee extends ce{constructor(e){super(),se(this,e,Le,Me,c,{currentTime:0})}}function Ie(t){let n,o,r,s,c,l,i,a,u,d,f;return{c(){n=b("div"),o=x(),r=b("div"),s=b("div"),s.innerHTML='<h2>Saving Video</h2> \n        <h4 class="svelte-8jmvgp">This might take a bit</h4>',c=x(),l=b("div"),i=b("div"),a=b("div"),u=x(),d=b("h4"),f=$(t[1]),w(n,"class","blackout svelte-8jmvgp"),w(s,"class","topAndBottom svelte-8jmvgp"),w(a,"class","loadingMain svelte-8jmvgp"),w(i,"class","loadingBG svelte-8jmvgp"),w(d,"class","svelte-8jmvgp"),w(l,"class","topAndBottom svelte-8jmvgp"),w(r,"class","bg svelte-8jmvgp")},m(e,m){v(e,n,m),v(e,o,m),v(e,r,m),p(r,s),p(r,c),p(r,l),p(l,i),p(i,a),t[3](a),p(l,u),p(l,d),p(d,f)},p(e,[t]){2&t&&_(f,e[1])},i:e,o:e,d(e){e&&g(n),e&&g(o),e&&g(r),t[3](null)}}}function He(e){for(var t=atob(e),n=new ArrayBuffer(t.length),o=new Uint8Array(n),r=0;r<t.length;r++)o[r]=t.charCodeAt(r);return n}function Ae(e,t,n){let o,r="Loading in video file...",{blob:s}=t;return P((async()=>{n(0,o.style.width="0%",o),async function(e){new Promise((async t=>{let s,c=URL.createObjectURL(e),l=document.createElement("video");for(l.addEventListener("seeked",(async function(){s&&s()})),l.src=c;(l.duration===1/0||isNaN(l.duration))&&l.readyState<2;)await new Promise((e=>setTimeout(e,1e3))),l.currentTime=1e7*Math.random();let i=l.duration,a=document.createElement("canvas"),u=a.getContext("2d"),[d,f]=[l.videoWidth,l.videoHeight];a.width=240,a.height=320;let m=[],h=30,p=1/h,v=0,g=Math.round(i*h);console.log(g);let b=0,$=0;for(;v<i;){if(l.currentTime=v,await new Promise((e=>s=e)),3==b){u.drawImage(l,0,0,d,f);let e=a.toDataURL("image/jpeg",.9);m.push(He(e.slice(23))),b=0}b++,$++,n(1,r="Frame: "+$+" out of: "+g),n(0,o.style.width=$/g*100+"%",o),v+=p}t(m);let x=new Blob(m,{type:"video/mjpeg"});console.log(x);let y=new FormData,w=new File([x],"pleaseworkvideo.mjpeg");y.append("data",w),fetch("/upload",{method:"POST",body:y})}))}(s)})),e.$$set=e=>{"blob"in e&&n(2,s=e.blob)},[o,r,s,function(e){B[e?"unshift":"push"]((()=>{o=e,n(0,o)}))}]}class Se extends ce{constructor(e){super(),se(this,e,Ae,Ie,c,{blob:2})}}function ze(e){let t,n;return t=new Se({props:{blob:e[6]}}),{c(){te(t.$$.fragment)},m(e,o){ne(t,e,o),n=!0},p(e,n){const o={};64&n&&(o.blob=e[6]),t.$set(o)},i(e){n||(Q(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){oe(t,e)}}}function Ne(t){let n,o,r;return{c(){n=b("button"),n.innerHTML='<h3 class="svelte-1i78tf8">Record</h3>',w(n,"class","recordBtn svelte-1i78tf8")},m(e,s){v(e,n,s),o||(r=y(n,"click",t[13]),o=!0)},p:e,d(e){e&&g(n),o=!1,r()}}}function qe(t){let n,o,s,c,l;return{c(){n=b("button"),n.innerHTML='<h3 class="svelte-1i78tf8">Save Video</h3>',o=x(),s=b("button"),s.innerHTML='<h3 class="svelte-1i78tf8">Delete Video</h3>',w(n,"class","saveBtn svelte-1i78tf8"),w(s,"class","redBtn svelte-1i78tf8")},m(e,r){v(e,n,r),v(e,o,r),v(e,s,r),c||(l=[y(n,"click",t[11]),y(s,"click",t[10])],c=!0)},p:e,i:e,o:e,d(e){e&&g(n),e&&g(o),e&&g(s),c=!1,r(l)}}}function Ue(t){let n;return{c(){n=b("h3"),n.textContent="Recording",w(n,"class","svelte-1i78tf8")},m(e,t){v(e,n,t)},p:e,i:e,o:e,d(e){e&&g(n)}}}function Ke(e){let t,n,o,r,s,c,l,i,a,u;function d(t){e[15](t)}let f={};function m(t){e[16](t)}void 0!==e[0]&&(f.currentCameraType=e[0]),o=new Oe({props:f}),B.push((()=>ee(o,"currentCameraType",d)));let h={};return void 0!==e[1]&&(h.currentTime=e[1]),i=new Ee({props:h}),B.push((()=>ee(i,"currentTime",m))),{c(){t=b("h4"),t.textContent="Camera type",n=x(),te(o.$$.fragment),s=x(),c=b("h4"),c.textContent="Record Time",l=x(),te(i.$$.fragment),w(t,"class","svelte-1i78tf8"),C(c,"margin-top","1rem"),w(c,"class","svelte-1i78tf8")},m(e,r){v(e,t,r),v(e,n,r),ne(o,e,r),v(e,s,r),v(e,c,r),v(e,l,r),ne(i,e,r),u=!0},p(e,t){const n={};!r&&1&t&&(r=!0,n.currentCameraType=e[0],A((()=>r=!1))),o.$set(n);const s={};!a&&2&t&&(a=!0,s.currentTime=e[1],A((()=>a=!1))),i.$set(s)},i(e){u||(Q(o.$$.fragment,e),Q(i.$$.fragment,e),u=!0)},o(e){X(o.$$.fragment,e),X(i.$$.fragment,e),u=!1},d(e){e&&g(t),e&&g(n),oe(o,e),e&&g(s),e&&g(c),e&&g(l),oe(i,e)}}}function Ve(e){let t,n,o,r,s,c,l,i,a,u,d,f,m,h,C,T,R,k=e[5]&&ze(e),j=!e[3]&&!e[4]&&Ne(e);const D=[Ke,Ue,qe],O=[];function P(e,t){return e[3]||e[4]?e[3]?1:e[4]?2:-1:0}return~(m=P(e))&&(h=O[m]=D[m](e)),{c(){k&&k.c(),t=x(),n=b("button"),n.textContent="Back",o=x(),r=b("div"),s=b("h3"),c=$("Frame #"),l=$(e[7]),i=x(),a=b("div"),j&&j.c(),u=x(),d=b("video"),f=x(),h&&h.c(),w(n,"class","backBtn svelte-1i78tf8"),w(s,"class","svelte-1i78tf8"),d.muted=!0,d.autoplay=!0,d.playsInline=!0,d.loop=!0,w(d,"class","svelte-1i78tf8"),w(a,"class","vidHolder svelte-1i78tf8"),w(r,"class","center svelte-1i78tf8")},m(h,g){k&&k.m(h,g),v(h,t,g),v(h,n,g),v(h,o,g),v(h,r,g),p(r,s),p(s,c),p(s,l),p(r,i),p(r,a),j&&j.m(a,null),p(a,u),p(a,d),e[14](d),p(r,f),~m&&O[m].m(r,null),C=!0,T||(R=y(n,"click",e[8]),T=!0)},p(e,[n]){e[5]?k?(k.p(e,n),32&n&&Q(k,1)):(k=ze(e),k.c(),Q(k,1),k.m(t.parentNode,t)):k&&(G(),X(k,1,1,(()=>{k=null})),J()),(!C||128&n)&&_(l,e[7]),e[3]||e[4]?j&&(j.d(1),j=null):j?j.p(e,n):(j=Ne(e),j.c(),j.m(a,u));let o=m;m=P(e),m===o?~m&&O[m].p(e,n):(h&&(G(),X(O[o],1,1,(()=>{O[o]=null})),J()),~m?(h=O[m],h?h.p(e,n):(h=O[m]=D[m](e),h.c()),Q(h,1),h.m(r,null)):h=null)},i(e){C||(Q(k),Q(h),C=!0)},o(e){X(k),X(h),C=!1},d(s){k&&k.d(s),s&&g(t),s&&g(n),s&&g(o),s&&g(r),j&&j.d(),e[14](null),~m&&O[m].d(),T=!1,R()}}}function We(e,t,n){let o;l(e,ge,(e=>n(7,o=e)));let r,{showRecordPage:s}=t,c="BACK",i=5;var a;let u,d=!1,f=!1,m=!1;const h=e=>{d||(n(3,d=!0),a.startRecording(),setTimeout((function(){a.stopRecording(v)}),1e3*e))};function p(e){"FRONT"==c?navigator.mediaDevices.getUserMedia({audio:!0,video:{width:320,height:240,facingMode:{exact:"environment"}}}).then((function(t){e(t)})).catch((function(e){alert("Unable to capture your camera. Please check console logs."),console.error(e)})):navigator.mediaDevices.getUserMedia({audio:!0,video:{width:240,height:320}}).then((function(t){e(t)})).catch((function(e){alert("Unable to capture your camera. Please check console logs."),console.error(e)}))}function v(){n(4,f=!0),n(3,d=!1),n(2,r.src=n(2,r.srcObject=null,r),r),n(2,r.muted=!1,r),n(2,r.volume=1,r),n(2,r.src=URL.createObjectURL(a.getBlob()),r),n(6,u=a.getBlob()),a.camera.stop(),a.destroy(),a=null}P((async()=>{p((function(e){n(2,r.muted=!0,r),n(2,r.volume=0,r),n(2,r.srcObject=e,r),(a=RecordRTC(e,{type:"video"})).camera=e}))}));let g=[{id:"001",videoFile:null},{id:"002",videoFile:null}];const b=window.indexedDB.open("MyTestDatabase",1);let $;b.onerror=e=>{console.error("Why didn't you allow my web app to use IndexedDB?!")},b.onsuccess=e=>{$=e.target.result;const t=$.transaction(["frames"]).objectStore("frames").get("001");t.onerror=e=>{console.log("SETSEESTSTES ERROR")},t.onsuccess=e=>{console.log(e.target.result)}},b.onupgradeneeded=e=>{$=e.target.result,$.createObjectStore("frames",{keyPath:"id"}).transaction.oncomplete=e=>{const t=$.transaction("frames","readwrite").objectStore("frames");g.forEach((e=>{t.add(e)}))}};return e.$$set=e=>{"showRecordPage"in e&&n(12,s=e.showRecordPage)},e.$$.update=()=>{1&e.$$.dirty&&("FRONT"!=c&&"BACK"!=c||p((function(e){n(2,r.muted=!0,r),n(2,r.volume=0,r),n(2,r.srcObject=e,r),(a=RecordRTC(e,{type:"video"})).camera=e})))},[c,i,r,d,f,m,u,o,()=>{n(12,s=!1)},h,()=>{n(4,f=!1),n(3,d=!1),p((function(e){n(2,r.muted=!0,r),n(2,r.volume=0,r),n(2,r.srcObject=e,r),(a=RecordRTC(e,{type:"video"})).camera=e}))},()=>{n(5,m=!0)},s,()=>h(i),function(e){B[e?"unshift":"push"]((()=>{r=e,n(2,r),n(0,c)}))},function(e){c=e,n(0,c)},function(e){i=e,n(1,i)}]}class Ge extends ce{constructor(e){super(),se(this,e,We,Ve,c,{showRecordPage:12})}}function Je(e){let t,n,o;function r(t){e[6](t)}let s={};return void 0!==e[2]&&(s.showRecordPage=e[2]),t=new Ge({props:s}),B.push((()=>ee(t,"showRecordPage",r))),{c(){te(t.$$.fragment)},m(e,n){ne(t,e,n),o=!0},p(e,o){const r={};!n&&4&o&&(n=!0,r.showRecordPage=e[2],A((()=>n=!1))),t.$set(r)},i(e){o||(Q(t.$$.fragment,e),o=!0)},o(e){X(t.$$.fragment,e),o=!1},d(e){oe(t,e)}}}function Qe(e){let t,n,o,r,s,c,l,i=e[1]&&Xe(e);function a(t){e[4](t)}function u(t){e[5](t)}n=new ae({});let d={};return void 0!==e[0]&&(d.savedFrameIDs=e[0]),void 0!==e[2]&&(d.showRecordPage=e[2]),r=new Te({props:d}),B.push((()=>ee(r,"savedFrameIDs",a))),B.push((()=>ee(r,"showRecordPage",u))),{c(){i&&i.c(),t=x(),te(n.$$.fragment),o=x(),te(r.$$.fragment)},m(e,s){i&&i.m(e,s),v(e,t,s),ne(n,e,s),v(e,o,s),ne(r,e,s),l=!0},p(e,n){e[1]?i?(i.p(e,n),2&n&&Q(i,1)):(i=Xe(e),i.c(),Q(i,1),i.m(t.parentNode,t)):i&&(G(),X(i,1,1,(()=>{i=null})),J());const o={};!s&&1&n&&(s=!0,o.savedFrameIDs=e[0],A((()=>s=!1))),!c&&4&n&&(c=!0,o.showRecordPage=e[2],A((()=>c=!1))),r.$set(o)},i(e){l||(Q(i),Q(n.$$.fragment,e),Q(r.$$.fragment,e),l=!0)},o(e){X(i),X(n.$$.fragment,e),X(r.$$.fragment,e),l=!1},d(e){i&&i.d(e),e&&g(t),oe(n,e),e&&g(o),oe(r,e)}}}function Xe(e){let t,n,o;function r(t){e[3](t)}let s={frameID:Ze};return void 0!==e[1]&&(s.showFrameDetected=e[1]),t=new pe({props:s}),B.push((()=>ee(t,"showFrameDetected",r))),{c(){te(t.$$.fragment)},m(e,n){ne(t,e,n),o=!0},p(e,o){const r={};!n&&2&o&&(n=!0,r.showFrameDetected=e[1],A((()=>n=!1))),t.$set(r)},i(e){o||(Q(t.$$.fragment,e),o=!0)},o(e){X(t.$$.fragment,e),o=!1},d(e){oe(t,e)}}}function Ye(e){let t,n,o,r;const s=[Qe,Je],c=[];function l(e,t){return e[2]?1:0}return t=l(e),n=c[t]=s[t](e),{c(){n.c(),o=$("")},m(e,n){c[t].m(e,n),v(e,o,n),r=!0},p(e,[r]){let i=t;t=l(e),t===i?c[t].p(e,r):(G(),X(c[i],1,1,(()=>{c[i]=null})),J(),n=c[t],n?n.p(e,r):(n=c[t]=s[t](e),n.c()),Q(n,1),n.m(o.parentNode,o))},i(e){r||(Q(n),r=!0)},o(e){X(n),r=!1},d(e){c[t].d(e),e&&g(o)}}}const Ze="000";function et(e,t,n){let o=["001","002","003","004"],r=!1,s=!0;return P((async()=>{o.forEach((e=>{}))})),[o,r,s,function(e){r=e,n(1,r)},function(e){o=e,n(0,o)},function(e){s=e,n(2,s)},function(e){s=e,n(2,s)}]}return new class extends ce{constructor(e){super(),se(this,e,et,Ye,c,{})}}({target:document.body})}();
